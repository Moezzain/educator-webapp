(this["webpackJsonpeducator-webapp"]=this["webpackJsonpeducator-webapp"]||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),c=a.n(i),o=(a(91),a(33)),s=a(5),l=a.n(s),u=a(8),d=a(17),m=a(18),p=a(20),h=a(19),v=a(21),f="https://api.ithnain.com";function g(e){return e.map((function(e){return JSON.parse(e)}))}function b(e){var t=[],a={};for(var n in e){var r=e[n];Array.isArray(r)&&(a[n]=g(r),t.push(g(r)))}return a}var E=a(26),x=a.n(E),y=function(){var e=Object(u.a)(l.a.mark((function e(t,a,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(f,"/message?chatId=").concat(t,"&educatorId=").concat(a),{headers:{Authorization:"Bearer ".concat(n)},timeout:1e4});case 3:if(!(null===(r=e.sent)||void 0===r?void 0:r.data)){e.next=6;break}return e.abrupt("return",r.data);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(f,"/educator?get=all&id=").concat(t,"&educatorId=").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 3:if(!(n=e.sent).data){e.next=8;break}return r={},n.data.forEach((function(e){var t=JSON.parse(e),a=t.name,n=t.id;r[n]={name:a,id:n}})),e.abrupt("return",r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error getEducatorIds",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,a);case 2:n=e.sent,[],e.t0=l.a.keys(n);case 5:if((e.t1=e.t0()).done){e.next=13;break}return r=e.t1.value,e.next=9,C(n[r].id,a);case 9:(i=e.sent)&&(n[r].chats=i,n[r].count=i.length),e.next=5;break;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"all",e.next=4,x.a.get("".concat(f,"/chat?educatorId=").concat(t,"&filterDate=").concat("all"),{headers:{Authorization:"Bearer ".concat(a)}});case 4:if(!(n=e.sent).data){e.next=12;break}if(!n.data.error){e.next=8;break}return e.abrupt("return");case 8:if(c=null===(r=n.data)||void 0===r?void 0:null===(i=r.chats)||void 0===i?void 0:i.map((function(e){return JSON.parse(e)}))){e.next=11;break}return e.abrupt("return",[]);case 11:return e.abrupt("return",c);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("Error getting chats:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(l.a.mark((function e(){var r,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,a);case 2:r=e.sent,i={},c=l.a.mark((function e(){var t,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r[n],e.next=3,j(t.id,a);case 3:c=e.sent,o=c.chats,s=c.appointments,o&&(t.chats=o,t.count=o.length,o.forEach((function(e){var a=i[e.patientId];a||(i[e.patientId]=e,a=i[e.patientId]),a&&a.educators?a.educators.push({id:t.id,name:t.name}):a.educators=[{id:t.id,name:t.name}]}))),s&&(r[n].appointments=s);case 8:case"end":return e.stop()}}),e)})),e.t0=l.a.keys(r);case 6:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.delegateYield(c(),"t2",9);case 9:e.next=6;break;case 11:return e.abrupt("return",{v:{educators:r,patients:i}});case 12:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:if("object"!==typeof(r=e.t0)){e.next=5;break}return e.abrupt("return",r.v);case 5:e.next=10;break;case 7:e.prev=7,e.t1=e.catch(0),console.log(" Error getAllEducatorsAndPatients",e.t1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"chats,appointments,educator,all",e.next=4,x.a.get("".concat(f,"/educator?id=").concat(t,"&get=").concat("chats,appointments,educator,all","&educatorId=").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 4:if(!(n=e.sent).data){e.next=11;break}return delete(r=n.data).educator,i=b(r),c=i.appointments,o=i.chats,e.abrupt("return",{chats:o,appointments:c});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("getEducatorData Error",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(l.a.mark((function e(t,a,n){var r,i,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(f,"/patient?patientId=").concat(n,"&educatorId=").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 3:if(!(r=e.sent).data){e.next=8;break}return i=r.data,c=i.patient,o=i.patientProfile,s=JSON.parse(c),e.abrupt("return",{patient:s,patientProfile:o});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("getPatient Error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),I=r.a.createContext(),T=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).saveData=function(e,t,n){t=a.filterAppointments(t),localStorage.setItem("educatorId",e),a.setState({educatorId:e,appointments:t,chats:n}),console.log("educatorId",e),"55aabda5-8af2-4a39-b074-80a1852dcb1d"==e&&a.getEducatorData()},a.setEducatorId=function(e){return a.setState({educatorId:e})},a.saveToken=function(e){a.setState({token:e}),localStorage.setItem("token",e)},a.getLocalData=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=localStorage.getItem("educatorId"),r=localStorage.getItem("token");n&&r?(a.saveToken(r),a.setEducatorId(n),e({educatorId:n,token:r})):t("no educatorId or token set")})));case 1:case"end":return e.stop()}}),e)}))),a.clearState=function(){localStorage.clear(),a.setState({educatorId:"",token:"",activeChat:"",loading:!1,patientsVisible:!1,appointmentsVisible:!0,educatorsVisible:!1,appointments:{},educators:{},patients:{},chats:[]})},a.getEducatorChats=Object(u.a)(l.a.mark((function e(){var t,n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t=a.state,n=t.token,r=t.educatorId,e.next=4,w(r,n);case 4:if(!(i=e.sent)){e.next=10;break}return a.setState({educators:i,loading:!1}),e.abrupt("return",i);case 10:a.setState({loading:!1});case 11:case"end":return e.stop()}}),e)}))),a.getEducatorData=Object(u.a)(l.a.mark((function e(){var t,n,r,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t=a.state,n=t.token,r=t.educatorId,e.next=4,O(r,n);case 4:if(i=e.sent,c=i.educators,o=i.patients,!c||!o){e.next=12;break}return a.setState({educators:c,patients:o,loading:!1}),e.abrupt("return",c);case 12:if(!c){e.next=17;break}return a.setState({educators:c,loading:!1}),e.abrupt("return",c);case 17:a.setState({loading:!1});case 18:case"end":return e.stop()}}),e)}))),a.getPatient=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state,r=n.token,i=n.educatorId,e.next=3,S(i,r,t);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setActiveEducator=function(e){var t=a.filterAppointments(a.state.educators[e].appointments);a.setState({educatorId:e,chats:a.state.educators[e].chats,appointments:t})},a.setChats=function(e){return a.setState({chats:e})},a.showPatient=function(){return a.setState({patientsVisible:!0})},a.hidePatient=function(){return a.setState({patientsVisible:!1})},a.showAppointments=function(){return a.setState({appointmentsVisible:!0})},a.hideAppointments=function(){return a.setState({appointmentsVisible:!1})},a.showEducators=function(){return a.setState({educatorsVisible:!0,patientsVisible:!1})},a.hideEducators=function(){return a.setState({educatorsVisible:!1,patientsVisible:!0})},a.setActiveChat=function(e){return a.setState({activeChat:e})},a.state={educatorId:"",token:"",activeChat:"",loading:!1,patientsVisible:!1,appointmentsVisible:!0,educatorsVisible:!1,appointments:{},educators:{},patients:{},chats:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getLocalData()}},{key:"filterAppointments",value:function(e){if(e){var t={};return e.forEach((function(e){"string"==typeof e&&(e=JSON.parse(e));var a=e.date.split("T")[0];t[a]?t[a].push(e):t[a]=[e]})),t}return e}},{key:"render",value:function(){return r.a.createElement(I.Provider,{value:Object(o.a)({},this.state,{saveData:this.saveData,saveToken:this.saveToken,clearState:this.clearState,getEducatorChats:this.getEducatorChats,setEducatorId:this.setEducatorId,setActiveEducator:this.setActiveEducator,setChats:this.setChats,showPatient:this.showPatient,hidePatient:this.hidePatient,showAppointments:this.showAppointments,hideAppointments:this.hideAppointments,showEducators:this.showEducators,hideEducators:this.hideEducators,setActiveChat:this.setActiveChat,getLocalData:this.getLocalData,getPatient:this.getPatient})},this.props.children)}}]),t}(n.Component),A=(I.Consumer,a(37)),L=a(25),P=a(34),B=a(125),D=a(126),V=a(80),N=a(132),G=a(127),R=a(128),F=a(134),M=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(F.a,{style:{width:this.props.width,flexDirection:this.props.direction,backgroundColor:"rgba(247,247,247,1)",padding:this.props.padding,marginBottom:this.props.marginB,marginTop:this.props.marginT,borderRadius:25}},this.props.children)}}]),t}(n.Component),K=a(35),H=a.n(K),J=a(79),W=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,e.next=3,c=n,Object(J.sha256)(c);case 3:return r=e.sent,i={id:a,password:r},e.abrupt("return",x.a.post("".concat(f,"/login"),i));case 6:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",loading:!1},a.handleChange=function(e){a.setState(Object(P.a)({},e.target.name,e.target.value))},a.onSubmit=function(){a.setState({loading:!0}),W(a.state).then((function(e){var t=JSON.parse(e.data.educator).token,n=t[t.length-1],r=e.data,i=r.educatorId,c=r.appointments,o=r.chats;a.setState({loading:!1}),a.context.saveToken(n),a.context.saveData(i,c,o),a.props.history.push("showpatients")})).catch((function(e){console.log(e),a.setState({loading:!1})}))},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.context.getLocalData();case 3:(null===(t=e.sent)||void 0===t?void 0:t.token)&&(null===t||void 0===t?void 0:t.educatorId)&&(this.context.getEducatorChats(),this.props.history.push("showpatients")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("context not loaded");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password,i=t.loading;return r.a.createElement(B.a,{fluid:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#0a122a"}},r.a.createElement(D.a,null,r.a.createElement(V.a,{sm:12,lg:4,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("img",{src:H.a,style:{width:"50%",marginBottom:"4%"}})),r.a.createElement(V.a,{sm:12,lg:6,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(M,{width:"80%",padding:30},r.a.createElement(N.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(N.a.Group,{controlId:"formBasicEmail"},r.a.createElement(N.a.Label,null,"Username"),r.a.createElement(N.a.Control,{type:"text",placeholder:"Enter username",value:a,name:"username",onChange:function(t){return e.handleChange(t)}})),r.a.createElement(N.a.Group,{controlId:"formBasicPassword"},r.a.createElement(N.a.Label,null,"Password"),r.a.createElement(N.a.Control,{type:"password",placeholder:"Password",value:n,name:"password",onChange:function(t){return e.handleChange(t)}})),i?r.a.createElement(G.a,{style:{alignSelf:"center",marginBottom:10},animation:"border"}):null,r.a.createElement(R.a,{variant:"primary",onClick:this.onSubmit},"Submit"))))))}}]),t}(r.a.Component);z.contextType=I;var Y=z,U=a(129),_=a(130),X=a(136),$=a(137),q=a(133),Q=a(82),Z=function(e){var t=Object(n.useContext)(I),a=t.educators,i=t.setActiveEducator,c=t.loading,o=t.clearState;return r.a.createElement(q.a,{bg:"secondary",variant:"dark",collapseOnSelect:!0,expand:"lg"},r.a.createElement(q.a.Brand,null,r.a.createElement("img",{alt:"",src:H.a,width:"80",height:"40",className:"d-inline-block align-top"})," "),r.a.createElement(q.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(q.a.Collapse,{id:"responsive-navbar-nav"},Object.keys(a).length?r.a.createElement(r.a.Fragment,null,Object.keys(a).map((function(e){return r.a.createElement(Q.a.Link,{key:a[e].id,style:{color:"#FFF"},onClick:function(){return i(a[e].id)}},a[e].name)})),r.a.createElement(Q.a,{className:"mr-auto ml-10"},r.a.createElement(Q.a.Link,null,r.a.createElement(A.b,{style:{color:"#FFF"},to:"/",onClick:function(){return o()}},"Logout")))):c?r.a.createElement(G.a,{animation:"border"}):r.a.createElement(Q.a,{className:"mr-auto"},r.a.createElement(Q.a.Link,null,r.a.createElement(A.b,{style:{color:"#FFF"},to:"/",onClick:function(){return o()}},"Logout")))))},ee=function(){return r.a.createElement(q.a,{bg:"secondary",variant:"dark",style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("img",{alt:"",src:H.a,width:"100",height:"50",className:"d-inline-block align-top"}))},te=a(57),ae=["pdf","doc","docx"],ne=["mp3","3gp","caf","wav","wave","m4a"],re=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={messages:[],duration:0,lang:{ar:{messageCount:"\u0639\u062f\u062f \u0627\u0644\u0631\u0633\u0627\u0626\u0644",usageDuration:"\u0645\u062f\u0629 \u0627\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645"}}},a.messagesEnd=r.a.createRef(),a.scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"1234",this.setState({loading:!0}),e.next=4,y(this.props.chatId,this.props.educatorId,this.props.token).then((function(e){if(!e)return t.setState({loading:!1}),[];var a=t.formatMessages(e);t.setDuration(a),t.setState({messages:a,loading:!1})})).catch((function(e){t.setState({loading:!1}),console.log("ERROR GETTING MESSAGES",e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&e.length>0){var t=new Date(e[0].message.createdOn),a=new Date(e[e.length-1].message.createdOn),n=Math.abs(a-t),r=Math.ceil(n/864e5);this.setState({duration:r})}}},{key:"formatMessages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];for(var a in e){var n=e[a],r=parseInt(n.user._id)-1;if(n.media){var i=n.media.split("."),c=i[i.length-1],o=c.includes("jpg"),s=ae.includes(c),l=ne.includes(c);o?(n.message={image:n.media},delete n.media):s?(n.message={text:n.text,file:n.media},delete n.media):l?(n.media=n.media.replace("vnd.wave","wav"),n.message={audio:n.media},delete n.media):n.message={text:""}}else n.text?n.message={text:n.text}:n.message={text:""};n.message.createdOn=n.createdOn;var u=new te.Message({id:r,message:n.message});t.push(u)}return t}},{key:"onSend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setState((function(t){return{messages:t.messages.append(e)}}))}},{key:"getTimeStamp",value:function(e){var t=new Date(e);return"".concat(t.getHours(),":").concat(t.getMinutes()," - ").concat(t.getMonth()+1,"/").concat(t.getDate())}},{key:"bubble",value:function(e){var t,a,n=e.message;return 0==n.id?(a=ie.senderBubble,t=ie.senderContainer):(a=ie.receiverBubble,t=ie.receiverContainer),n.message?r.a.createElement("div",{style:t},r.a.createElement("div",{style:Object(o.a)({},ie.bubble,{},a)},n.message.image?r.a.createElement("img",{src:n.message.image}):n.message.file?r.a.createElement("a",{href:n.message.file,target:"_blank"},n.message.text):n.message.text?n.message.text:null,r.a.createElement("br",null),this.getTimeStamp(n.message.createdOn))):null}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.messages,i=t.duration,c=this.state.lang.ar,o=c.messageCount,s=c.usageDuration;return r.a.createElement("div",{style:{paddingLeft:0,paddingRight:0,marginLeft:0,marginRight:0,width:"100vh",maxHeight:"80vh",overflowY:"auto"}},a?r.a.createElement(G.a,{animation:"border"}):n.length?null:r.a.createElement("div",null,"\u0627\u0644\u0645\u062d\u0627\u062f\u062b\u0629 \u0641\u0627\u0631\u063a\u0629 "),r.a.createElement("div",null,n.length," :",o," ",r.a.createElement("br",null),s,": ",i," ","\u064a\u0648\u0645"),r.a.createElement(te.ChatFeed,Object(P.a)({messages:n,isTyping:this.state.is_typing,hasInputField:!1,showSenderName:!0,bubblesCentered:!1,chatBubble:te.ChatBubble},"chatBubble",this.bubble.bind(this))),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))}}]),t}(r.a.Component),ie={bubble:{borderRadius:15,padding:20,backgroundColor:"#3680E5",display:"inline-block",color:"white"},senderBubble:{backgroundColor:"#3680E5",color:"white"},receiverBubble:{backgroundColor:"#D8D8D8",color:"black"},senderContainer:{display:"flex",justifyContent:"flex-end",marginBottom:5},receiverContainer:{display:"flex",justifyContent:"flex-start",marginBottom:5}},ce=a(36),oe=a(135),se=a(131),le={dateAffected:"",dateBirth:"",weight:"",height:"",hba1c:"",medications:"",patientName:"",notes:"",disease:"",sex:"",whoIsPatient:"",surgery:"",otherDisease:"",diet:""},ue={dateAffectedText:"\u0645\u0635\u0627\u0628 \u0645\u0646\u0630",dateBirthText:"\u0633\u0646\u0629 \u0627\u0644\u0645\u064a\u0644\u0627\u062f",dietText:"\u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u063a\u0630\u0627\u0626\u064a \u0627\u0644\u0645\u062a\u0628\u0639",diseaseText:"\u0627\u0644\u0645\u0631\u0636",weightText:"\u0627\u0644\u0648\u0632\u0646",heightText:"\u0627\u0644\u0637\u0648\u0644",Hba1CText:"Hba1C",medicinesText:"\u0627\u0644\u0623\u062f\u0648\u064a\u0629",sexText:"\u0627\u0644\u062c\u0646\u0633",surgeryText:"\u0627\u0644\u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u062c\u0631\u0627\u062d\u064a\u0629",otherDiseaseText:"\u0627\u0644\u0623\u0645\u0631\u0627\u0636 \u0627\u0644\u0623\u062e\u0631\u0649",whoIsPatientText:"\u0645\u0646 \u0627\u0644\u0645\u062a\u0644\u0642\u064a\u061f",outSideLinkText:"\u0631\u0627\u0628\u0637 \u0645\u0644\u0641 \u062e\u0627\u0631\u062c\u064a",topicsText:"\u0627\u0644\u0645\u0648\u0627\u0636\u064a\u0639",saveText:"\u062d\u0641\u0638"},de=function(){var e=Object(n.useContext)(I),t=e.chats,a=(e.hidePatient,e.showEducators,e.activeChat),i=e.getPatient,c=Object(n.useState)(!1),s=Object(ce.a)(c,2),d=s[0],m=s[1],p=Object(n.useState)(""),h=Object(ce.a)(p,2),v=h[0],f=h[1],g=Object(n.useState)({}),b=Object(ce.a)(g,2),E=(b[0],b[1]),x=Object(n.useState)(le),y=Object(ce.a)(x,2),k=y[0],w=y[1],C=Object(n.useState)({medicalProfile:Object(o.a)({},le)}),O=Object(ce.a)(C,2),j=(O[0],O[1],Object(n.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=7;break}return m(!0),e.next=4,i(v);case 4:t=e.sent,m(!1),(null===t||void 0===t?void 0:t.patientProfile)&&(w(t.patientProfile),console.log(t.patientProfile));case 7:case"end":return e.stop()}}),e)}))),[i,v]));if(Object(n.useEffect)((function(){if(a){var e=null===t||void 0===t?void 0:t.find((function(e){return e.id===a}));e&&(E(e),f(null===e||void 0===e?void 0:e.patientId),j())}}),[a,t,j]),!t)return null;console.log("rendering profile");var S=ue,T=S.dateAffectedText,A=S.dietText,L=S.dateBirthText,P=S.diseaseText,B=S.weightText,D=S.heightText,F=S.Hba1CText,M=S.medicinesText,K=S.sexText,H=S.surgeryText,J=S.otherDiseaseText,W=S.whoIsPatientText,z=S.outSideLinkText,Y=S.topicsText;S.saveText;return t.map((function(e){var t,n,i,c,o,s=k.dateAffected,l=k.dateBirth,u=k.weights,m=k.heights,p=k.hba1cs,h=k.medicines,v=(k.patientName,k.notes,k.diseaseType),f=k.sex,g=k.whoIsPatient,b=k.surgery,E=k.otherDisease,x=k.diet,y=k.outSideLink,w=k.topics;if(console.log("patientName:",e.patientName),e.id!==a)return null;var C=r.a.createElement(oe.a,{id:"popover-basic"},r.a.createElement(oe.a.Title,{as:"h3"},F),r.a.createElement(oe.a.Content,{style:{width:"100%",padding:0}},null===p||void 0===p?void 0:p.map((function(e){return r.a.createElement("div",{style:{border:"1px solid black",width:"100%",textAlign:"center"}},null===e||void 0===e?void 0:e.hba1c)})))),O=r.a.createElement(oe.a,{id:"popover-basic"},r.a.createElement(oe.a.Title,{as:"h3"},B),r.a.createElement(oe.a.Content,{style:{width:"100%",padding:0}},null===u||void 0===u?void 0:u.map((function(e){return r.a.createElement("div",{style:{border:"1px solid black",width:"100%",textAlign:"center"}},null===e||void 0===e?void 0:e.weight)})))),j=r.a.createElement(oe.a,{id:"popover-basic"},r.a.createElement(oe.a.Title,{as:"h3"},D),r.a.createElement(oe.a.Content,{style:{width:"100%",padding:0}},null===m||void 0===m?void 0:m.map((function(e){return r.a.createElement("div",{style:{border:"1px solid black",width:"100%",textAlign:"center"}},null===e||void 0===e?void 0:e.height)})))),S=r.a.createElement(oe.a,{id:"popover-basic"},r.a.createElement(oe.a.Title,{as:"h3"},M),r.a.createElement(oe.a.Content,{style:{width:"100%",padding:0}},null===h||void 0===h?void 0:h.map((function(e){return r.a.createElement("div",{style:{border:"1px solid black",width:"100%",textAlign:"center"}},null===e||void 0===e?void 0:e.medicine)})))),I=r.a.createElement(oe.a,{id:"popover-basic"},r.a.createElement(oe.a.Title,{as:"h3"},Y),r.a.createElement(oe.a.Content,{style:{width:"100%",padding:0}},null===w||void 0===w?void 0:w.map((function(e){return r.a.createElement("div",{style:{border:"1px solid black",width:"100%",textAlign:"center"}},e)}))));return r.a.createElement(U.a.Pane,{key:e.id,eventKey:e.id},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("h3",null,e.id),d?r.a.createElement(G.a,{animation:"border"}):null,r.a.createElement(N.a,{style:{width:"100vh",maxHeight:"75vh",overflowY:"scroll",overflowX:"hidden"}},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},P),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:v}))),r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},T),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:s})))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},F,r.a.createElement(se.a,{trigger:"click",placement:"right",overlay:C},r.a.createElement(R.a,{variant:"link",style:{padding:"2px 2px",alignSelf:"center",marginLeft:5,marginBottom:3}},">"))),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:p?null===(t=p[0])||void 0===t?void 0:t.hba1c:""}))),r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},L),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:l})))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},K),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:f}))),r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},W),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:g})))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},M,r.a.createElement(se.a,{trigger:"click",placement:"right",overlay:S},r.a.createElement(R.a,{variant:"link",style:{padding:"2px 2px",alignSelf:"center",marginLeft:5,marginBottom:3}},">"))),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:h?null===(n=h[0])||void 0===n?void 0:n.medicine:null}))),r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},J),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:E})))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},B,r.a.createElement(se.a,{trigger:"click",placement:"right",overlay:O},r.a.createElement(R.a,{variant:"link",style:{padding:"2px 2px",alignSelf:"center",marginLeft:5,marginBottom:3}},">"))),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:u?null===(i=u[0])||void 0===i?void 0:i.weight:""}))),r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},D,r.a.createElement(se.a,{trigger:"click",placement:"right",overlay:j},r.a.createElement(R.a,{variant:"link",style:{padding:"2px 2px",alignSelf:"center",marginLeft:5,marginBottom:3}},">"))),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:m?null===(c=m[0])||void 0===c?void 0:c.height:""})))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},A),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:x}))),r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},H),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:b})))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},Y,r.a.createElement(se.a,{trigger:"click",placement:"right",overlay:I},r.a.createElement(R.a,{variant:"link",style:{padding:"2px 2px",alignSelf:"center",marginLeft:5,marginBottom:3}},">"))),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:w?null===(o=w[0])||void 0===o?void 0:o.text:""}))),r.a.createElement(N.a.Group,{as:V.a},r.a.createElement(N.a.Label,{column:!0,sm:"10"},z),r.a.createElement(V.a,{sm:"10"},r.a.createElement(N.a.Control,{type:"text",defaultValue:y})))))))}))},me=function(e){var t=Object(n.useContext)(I),a=t.chats,i=t.patients,c=(t.hidePatient,t.showEducators,t.educatorId),o=t.activeChat;if(!a)return null;var s=a.find((function(e){return e.id==o}));if(!s)return null;var l=i[s.patientId];return console.log("educators:",s.id),r.a.createElement(U.a.Pane,{key:s.id,eventKey:s.id},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("h3",{style:{marginBottom:10}},"\u0627\u0644\u0645\u062b\u0642\u0641\u064a\u0646 \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u064a\u0646"),r.a.createElement(X.a,{as:"ul"},l&&l.educators&&l.educators.reverse().map((function(e){return r.a.createElement(X.a.Item,{as:"li",key:e.id,active:e.id==c},e.name)})))))},pe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",activeList:"",lang:{ar:{chat:"\u0627\u0644\u0645\u062d\u0627\u062f\u062b\u0629",profile:"\u0627\u0644\u0628\u0631\u0648\u0641\u0627\u064a\u0644",educators:"\u0627\u0644\u0645\u062a\u0627\u0628\u0639\u064a\u0646"}}},a.setActiveList=function(e){a.setState({activeList:e})},a.closeWindows=function(){a.setState({activeAppointment:""}),a.context.setActiveChat(""),a.context.hidePatient(),a.context.hideAppointments()},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){""==this.context.educatorId&&this.props.history.goBack()}},{key:"componentDidMount",value:function(){var e=this.context,t=e.chats,a=e.educators;try{var n,r;(null===(n=this.context)||void 0===n?void 0:null===(r=n.chats)||void 0===r?void 0:r.length)&&!this.context.chats[0].id&&(t=g(this.context.chats),this.context.setChats(t));var i=[];for(var c in a){a[c];i.push({})}}catch(o){console.log("error setting chats:",o)}}},{key:"renderChat",value:function(){var e=this.context,t=e.chats,a=(e.showPatient,e.activeChat),n=e.token,i=e.educatorId;return console.log("rendering chat",typeof t,"\nactivated",a),t?t.map((function(e){return r.a.createElement(U.a.Pane,{key:e.id,eventKey:e.id,style:{marginTop:20}},a==e.id?r.a.createElement(re,{chatId:e.id,token:n,educatorId:i}):null)})):null}},{key:"renderAppointments",value:function(){var e=this.context.appointments;return!e||e&&!Object.keys(e).length?null:(console.log("rendering appointments"),Object.keys(e).map((function(t){var a=e[t];return r.a.createElement(U.a.Pane,{key:t,eventKey:t},r.a.createElement("div",{style:{width:"100vh",maxHeight:"80vh"}},r.a.createElement("div",{style:{fontWeight:"600",marginBottom:10,textAlign:"center",fontSize:20}},t),r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Patient Name"))),r.a.createElement("tbody",null,a.map((function(e){var t=e.appointmentId,a=e.time,n=e.name,i=parseInt(a.split(":")[0]),c=a.split(":")[1],o=i>12?"".concat(i-12,":").concat(c):"".concat(i,":").concat(c);return r.a.createElement("tr",{key:t},r.a.createElement("td",null,o),r.a.createElement("td",null,n))}))))))})))}},{key:"renderAppointmentsList",value:function(){var e=this.context,t=e.appointments,a=e.showAppointments;return console.log("appointments render:",t),!t||t&&!Object.keys(t).length?null:Object.keys(t).map((function(e){return r.a.createElement(X.a.Item,{key:e,eventKey:e,onClick:function(){return a()}},e)}))}},{key:"renderPatientsList",value:function(){var e=this.context,t=e.chats,a=e.setActiveChat;return t?t.map((function(e){return r.a.createElement(X.a.Item,{key:e.id,eventKey:e.id,onClick:function(){return a(e.id)}},e.patientName)})):null}},{key:"renderListHeader",value:function(){var e,t,a=this;return"appointments"==this.state.activeList?(e="dark",t="primary"):(e="primary",t="dark"),r.a.createElement("div",{style:{display:"block",backgroundColor:"white",textAlign:"center",padding:10}},r.a.createElement(R.a,{variant:e,onClick:function(){return a.setActiveList("patients")},style:{marginRight:5}},"\u0627\u0644\u0645\u062d\u0627\u062f\u062b\u0627\u062a"),r.a.createElement(R.a,{variant:t,onClick:function(){return a.setActiveList("appointments")}},"\u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f"))}},{key:"renderCircle",value:function(){var e=this;return r.a.createElement("div",{style:ve.circle,onClick:function(){return e.closeWindows()}},"X")}},{key:"renderUpperTabs",value:function(){var e=this.state.lang.ar,t=e.chat,a=e.profile,n=e.educators;return r.a.createElement("div",null,r.a.createElement($.a,{defaultActiveKey:"chat",id:"noanim-tab-example",mountOnEnter:!0},r.a.createElement(U.a,{eventKey:"chat",title:t},this.renderChat()),r.a.createElement(U.a,{eventKey:"profile",title:a},r.a.createElement(de,null)),r.a.createElement(U.a,{eventKey:"educators",title:n},r.a.createElement(me,null))))}},{key:"render",value:function(){var e=this.state.activeList,t=this.context,a=(t.patientsVisible,t.appointmentsVisible),n=(t.educatorsVisible,t.activeChat);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,null),r.a.createElement(B.a,{fluid:!0,style:ve.container},r.a.createElement(M,{width:"80%",direction:"row",padding:10,marginT:40,marginB:40},r.a.createElement(U.a.Container,null,r.a.createElement("div",{className:"left-col"},this.renderListHeader(),"appointments"==e?r.a.createElement(X.a,null,this.renderAppointmentsList()):r.a.createElement(X.a,null,this.renderPatientsList())),r.a.createElement("div",{className:"right-col"},r.a.createElement(U.a.Content,{style:{width:"100%",height:"100%",overflow:"hidden"}},this.renderCircle(),"appointments"==e&&a?this.renderAppointments():n?this.renderUpperTabs():null))))),r.a.createElement(ee,null))}}]),t}(r.a.Component);pe.contextType=I;var he=pe,ve={container:{display:"flex",flexDirection:"row",justifyContent:"center",height:"100vh",backgroundColor:"#0a122a"},circle:{width:30,height:30,borderWidth:0,textAlign:"center",borderStyle:"solid",borderColor:"#000",color:"#000",borderRadius:80,alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",right:20,top:20,boxShadow:"0px 2px 5px 4px rgba(0,0,0,0.1)"}};var fe=function(){return r.a.createElement(T,null,r.a.createElement(A.a,null,r.a.createElement(L.c,null,r.a.createElement(L.a,{exact:!0,path:"/",component:Y}),r.a.createElement(L.a,{exact:!0,path:"/showpatients",component:he}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,t,a){e.exports=a.p+"static/media/ithnain.287167eb.png"},86:function(e,t,a){e.exports=a(120)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.bf3a751f.chunk.js.map